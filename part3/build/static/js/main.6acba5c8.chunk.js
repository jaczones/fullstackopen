(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),o=t(4),a=t(1),i=t(3),u=t.n(i),s=t(0),l=function(e){var n=e.handleFormSubmission,t=e.newName,c=e.newNumber,r=e.handleNameSubmission,o=e.handleNumberSubmission;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Add New"}),Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("p",{children:["Name: ",Object(s.jsx)("input",{value:t,onChange:r,placeholder:"Enter a name..."})]}),"Number: ",Object(s.jsx)("input",{value:c,onChange:o,placeholder:"Enter a number..."}),Object(s.jsx)("p",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})]})},d=function(e){var n=e.searchTerm,t=(e.e,e.setSearchTerm);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsxs)("p",{children:["Filtered Search ",Object(s.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})]})]})},h=function(e){var n=e.person,t=e.handleRemoveClick;return Object(s.jsxs)("li",{children:[n.name," ",n.number," ",Object(s.jsx)("button",{onClick:t,children:"delete"})]})},b=function(e){var n=e.filteredSearch,t=e.handleRemoveClick;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsx)(h,{person:e,handleRemoveClick:function(){return t(e.id)}},e.id)}))})]})};var j="/api/persons",m=function(){return u.a.get(j).then((function(e){return e.data}))},f=function(e){return u.a.post(j,e).then((function(e){return e.data}))},O=function(e,n){return u.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return u.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var n=e.message,t=e.className;return null==n?null:Object(s.jsx)("div",{className:t,children:n})},x=function(e){var n=Object(a.useState)([]),t=Object(o.a)(n,2),c=t[0],r=t[1],i=Object(a.useState)(""),u=Object(o.a)(i,2),h=u[0],j=u[1],x=Object(a.useState)(""),g=Object(o.a)(x,2),w=g[0],S=g[1],N=Object(a.useState)(""),k=Object(o.a)(N,2),C=k[0],T=k[1],y=Object(a.useState)(null),F=Object(o.a)(y,2),E=F[0],R=F[1],A=function(e,n){return e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))}(c,C);Object(a.useEffect)((function(){m().then((function(e){r(e)})).catch((function(e){console.log("Error fetching list"),R({error:"".concat(e," fetching list")}),setTimeout((function(){R(null)}),5e3)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)(p,{message:(null===E||void 0===E?void 0:E.notification)||(null===E||void 0===E?void 0:E.error),className:(null===E||void 0===E?void 0:E.notification)?"success":"error"}),Object(s.jsx)(d,{searchTerm:C,setSearchTerm:T}),Object(s.jsx)("div",{children:Object(s.jsx)(l,{handleFormSubmission:function(e){e.preventDefault();var n=c.find((function(e){return e.name===h})),t={name:h,number:w,id:c.length+1};n?(alert("".concat(h," is already in phonebook, replace the old number with a new one?")),O(n.id,t),R({notification:"'".concat(n.name,"' was successfully updated")}),setTimeout((function(){R(null),window.location.reload()}),5e3)):f(t).then((function(e){R({notification:"An entry for '".concat(t.name,"' was successfully created")}),setTimeout((function(){R(null)}),5e3),r(c.concat(e)),j(""),S("")})).catch((function(e){R({error:"".concat(e.response.data.error)}),setTimeout((function(){R(null)}),5e3)}))},newName:h,newNumber:w,handleNameSubmission:function(e){j(e.target.value)},handleNumberSubmission:function(e){S(e.target.value)}})}),Object(s.jsx)(b,{filteredSearch:A,handleRemoveClick:function(e){var n=c.find((function(n){return n.id===e}));console.log(n),alert("Delete ".concat(n.name,"?")),v(e).then((function(e){console.log(e),window.location.reload()})).catch((function(e){R({error:"".concat(e," caused contact removal to fail, try again later.")})}))}})]})};t(38);r.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.6acba5c8.chunk.js.map